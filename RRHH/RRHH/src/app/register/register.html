<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>Crear Nueva Cuenta</h2>
      <p>Completa el formulario para registrarte en el sistema</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <!-- Información Personal -->
      <div class="form-section">
        <h3>Información Personal</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">Nombre *</label>
            <input
              type="text"
              id="firstName"
              formControlName="firstName"
              placeholder="Tu nombre"
              [class.error]="isFieldInvalid('firstName')"
            />
            <div class="error-message" *ngIf="isFieldInvalid('firstName')">
              {{ getErrorMessage('firstName') }}
            </div>
          </div>

          <div class="form-group">
            <label for="lastName">Apellido *</label>
            <input
              type="text"
              id="lastName"
              formControlName="lastName"
              placeholder="Tu apellido"
              [class.error]="isFieldInvalid('lastName')"
            />
            <div class="error-message" *ngIf="isFieldInvalid('lastName')">
              {{ getErrorMessage('lastName') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="tu@email.com"
            [class.error]="isFieldInvalid('email')"
          />
          <div class="error-message" *ngIf="isFieldInvalid('email')">
            {{ getErrorMessage('email') }}
          </div>
        </div>

        <div class="form-group">
          <label for="phone">Teléfono *</label>
          <input
            type="tel"
            id="phone"
            formControlName="phone"
            
            [class.error]="isFieldInvalid('phone')"
          />
          <div class="error-message" *ngIf="isFieldInvalid('phone')">
            {{ getErrorMessage('phone') }}
          </div>
        </div>
      </div>

      <!-- Información Laboral -->
      <div class="form-section">
        <h3>Información Laboral</h3>
        <div class="form-group">
          <label for="department">Departamento *</label>
          <select
            id="department"
            formControlName="department"
            [class.error]="isFieldInvalid('department')"
          >
            <option value="">Selecciona un departamento</option>
            <option value="rrhh">Recursos Humanos</option>
            <option value="academico">Academico</option>
            <option value="secretaria">Secretaria</option>
            <option value="it">Tecnología</option>
            <option value="finanzas">Finanzas</option>
            <option value="ala de cadetes">Ala de Cadetes</option>
            <option value="logistica">Logistica</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('department')">
            {{ getErrorMessage('department') }}
          </div>
        </div>

        <div class="form-group">
          <label for="position">Cargo *</label>
          <input
            type="text"
            id="position"
            formControlName="position"
            placeholder="Tu cargo o posición"
            [class.error]="isFieldInvalid('position')"
          />
          <div class="error-message" *ngIf="isFieldInvalid('position')">
            {{ getErrorMessage('position') }}
          </div>
        </div>
      </div>

      <!-- Seguridad -->
      <div class="form-section">
        <h3>Seguridad</h3>
        <div class="form-group">
          <label for="password">Contraseña *</label>
          <input
            type="password"
            id="password"
            formControlName="password"
            placeholder="Mínimo 8 caracteres"
            [class.error]="isFieldInvalid('password')"
          />
          <div class="error-message" *ngIf="isFieldInvalid('password')">
            {{ getErrorMessage('password') }}
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña *</label>
          <input
            type="password"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Repite tu contraseña"
            [class.error]="isFieldInvalid('confirmPassword') || hasPasswordMismatch()"
          />
          <div class="error-message" *ngIf="isFieldInvalid('confirmPassword')">
            {{ getErrorMessage('confirmPassword') }}
          </div>
          <div class="error-message" *ngIf="hasPasswordMismatch()">
            Las contraseñas no coinciden
          </div>
        </div>
      </div>

     
      <!-- Mensajes de Error y Éxito -->
      <div class="error-message general-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="success-message" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button
          type="submit"
          class="register-button"
          [disabled]="isLoading"
          [class.loading]="isLoading"
        >
          <span *ngIf="!isLoading">Crear Cuenta</span>
          <span *ngIf="isLoading">Creando Cuenta...</span>
        </button>

        <button
          type="button"
          class="login-link-button"
          (click)="goToLogin()"
        >
          ¿Ya tienes cuenta? Inicia Sesión
        </button>
      </div>
    </form>
  </div>
</div>
