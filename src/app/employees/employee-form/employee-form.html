<div class="employee-form-container">
  <p-toast></p-toast>

  <div class="page-header">
    <div class="header-content">
      <h1><i class="pi pi-user-plus"></i> üÜï Nuevo Empleado - Versi√≥n Actualizada</h1>
      <p>Complete toda la informaci√≥n del empleado - Gesti√≥n Integral de RRHH</p>
      <small style="color: #10b981; font-weight: bold;">‚úì Sistema actualizado correctamente</small>
    </div>
  </div>

  <div class="form-card">
    <p-card>
      
      <!-- 1. INFORMACI√ìN PERSONAL -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showPersonal.set(!showPersonal())">
          <div class="tab-header">
            <i class="pi pi-user"></i>
            <span>1. Informaci√≥n Personal</span>
          </div>
          <i [class]="showPersonal() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showPersonal()) {
          <div class="section-content" style="display: block !important; min-height: 200px !important; background: #f0f8ff !important;">
            <form [formGroup]="personalForm">
              
              <div class="form-section">
                <h3><i class="pi pi-id-card"></i> Datos B√°sicos</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="nombreCompleto">Nombre Completo *</label>
                    <input pInputText id="nombreCompleto" formControlName="nombreCompleto" placeholder="Nombre y apellidos completos" />
                  </div>
                  <div class="form-field">
                    <label for="numeroIdentidad">N√∫mero de Identidad / DNI *</label>
                    <input pInputText id="numeroIdentidad" formControlName="numeroIdentidad" placeholder="0801-1234-56789" />
                  </div>
                  <div class="form-field">
                    <label for="fechaNacimiento">Fecha de Nacimiento</label>
                    <p-datepicker id="fechaNacimiento" formControlName="fechaNacimiento" [showIcon]="true" dateFormat="dd/mm/yy"></p-datepicker>
                  </div>
                  <div class="form-field">
                    <label for="genero">G√©nero</label>
                    <p-select id="genero" formControlName="genero" [options]="generos" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="estadoCivil">Estado Civil</label>
                    <p-select id="estadoCivil" formControlName="estadoCivil" [options]="estadosCiviles" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="nacionalidad">Nacionalidad</label>
                    <input pInputText id="nacionalidad" formControlName="nacionalidad" placeholder="Ej: Hondure√±a" />
                  </div>
                  <div class="form-field full-width">
                    <label for="direccion">Direcci√≥n Completa</label>
                    <input pInputText id="direccion" formControlName="direccion" placeholder="Calle, colonia, ciudad, departamento" />
                  </div>
                </div>
              </div>

              <div class="form-section">
                <h3><i class="pi pi-phone"></i> Informaci√≥n de Contacto</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="telefonoPersonal">Tel√©fono Personal *</label>
                    <input pInputText id="telefonoPersonal" formControlName="telefonoPersonal" placeholder="9999-9999" />
                  </div>
                  <div class="form-field">
                    <label for="telefonoCasa">Tel√©fono de Casa</label>
                    <input pInputText id="telefonoCasa" formControlName="telefonoCasa" placeholder="2222-2222" />
                  </div>
                  <div class="form-field">
                    <label for="telefonoOficina">Tel√©fono de Oficina</label>
                    <input pInputText id="telefonoOficina" formControlName="telefonoOficina" placeholder="2000-0000" />
                  </div>
                  <div class="form-field">
                    <label for="correoPersonal">Correo Electr√≥nico Personal *</label>
                    <input pInputText id="correoPersonal" type="email" formControlName="correoPersonal" placeholder="ejemplo@correo.com" />
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 2. INFORMACI√ìN LABORAL -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showLaboral.set(!showLaboral())">
          <div class="tab-header">
            <i class="pi pi-briefcase"></i>
            <span>2. Informaci√≥n Laboral</span>
          </div>
          <i [class]="showLaboral() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showLaboral()) {
          <div class="section-content">
            <form [formGroup]="laboralForm">
              <div class="form-section">
                <h3><i class="pi pi-building"></i> Datos del Puesto</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="cargo">Cargo / Puesto *</label>
                    <p-select id="cargo" formControlName="cargo" [options]="puestos" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="departamento">Departamento *</label>
                    <p-select id="departamento" formControlName="departamento" [options]="departamentos" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="fechaIngreso">Fecha de Ingreso *</label>
                    <p-datepicker id="fechaIngreso" formControlName="fechaIngreso" [showIcon]="true" dateFormat="dd/mm/yy"></p-datepicker>
                  </div>
                  <div class="form-field">
                    <label for="tipoContrato">Tipo de Contrato *</label>
                    <p-select id="tipoContrato" formControlName="tipoContrato" [options]="tiposContrato" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="jornadaLaboral">Jornada Laboral *</label>
                    <p-select id="jornadaLaboral" formControlName="jornadaLaboral" [options]="jornadas" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="jefeInmediato">Jefe Inmediato</label>
                    <input pInputText id="jefeInmediato" formControlName="jefeInmediato" placeholder="Nombre del supervisor" />
                  </div>
                  <div class="form-field">
                    <label for="numeroEmpleado">N√∫mero de Empleado</label>
                    <input pInputText id="numeroEmpleado" formControlName="numeroEmpleado" placeholder="EMP-0001" />
                  </div>
                  <div class="form-field">
                    <label for="centroTrabajo">Centro de Trabajo / Sede</label>
                    <input pInputText id="centroTrabajo" formControlName="centroTrabajo" placeholder="Oficina principal, sucursal, etc." />
                  </div>
                </div>
              </div>

              <div class="form-section">
                <h3><i class="pi pi-money-bill"></i> Informaci√≥n Salarial</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="salarioBase">Salario Base (Lempiras) *</label>
                    <p-inputNumber id="salarioBase" formControlName="salarioBase" mode="currency" currency="HNL" locale="es-HN"></p-inputNumber>
                  </div>
                  <div class="form-field">
                    <label for="formaPago">Forma de Pago *</label>
                    <p-select id="formaPago" formControlName="formaPago" [options]="formasPago" placeholder="Seleccione"></p-select>
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 3. DOCUMENTOS Y DATOS LEGALES -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showDocumentos.set(!showDocumentos())">
          <div class="tab-header">
            <i class="pi pi-file"></i>
            <span>3. Documentos y Datos Legales</span>
          </div>
          <i [class]="showDocumentos() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showDocumentos()) {
          <div class="section-content">
            <form [formGroup]="documentosForm">
              <div class="form-section">
                <h3><i class="pi pi-id-card"></i> Documentaci√≥n Legal</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="copiaIdentidad">Copia de Identidad / Pasaporte</label>
                    <input pInputText id="copiaIdentidad" formControlName="copiaIdentidad" placeholder="N√∫mero de documento" />
                  </div>
                  <div class="form-field">
                    <label for="numeroSeguroSocial">N√∫mero de Seguro Social</label>
                    <input pInputText id="numeroSeguroSocial" formControlName="numeroSeguroSocial" placeholder="NSS-000000" />
                  </div>
                  <div class="form-field">
                    <label for="numeroRTN">N√∫mero de RTN</label>
                    <input pInputText id="numeroRTN" formControlName="numeroRTN" placeholder="0000-0000-000000" />
                  </div>
                  <div class="form-field">
                    <label for="documentosContrato">Documentos de Contrato</label>
                    <input pInputText id="documentosContrato" formControlName="documentosContrato" placeholder="Referencia o archivo" />
                  </div>
                  <div class="form-field">
                    <label for="firmasDigitales">Firmas Digitales</label>
                    <input pInputText id="firmasDigitales" formControlName="firmasDigitales" placeholder="URL o referencia" />
                  </div>
                  <div class="form-field">
                    <label for="permisosLaborales">Permisos Laborales</label>
                    <input pInputText id="permisosLaborales" formControlName="permisosLaborales" placeholder="Permisos especiales" />
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 4. INFORMACI√ìN BANCARIA -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showBancaria.set(!showBancaria())">
          <div class="tab-header">
            <i class="pi pi-wallet"></i>
            <span>4. Informaci√≥n Bancaria</span>
          </div>
          <i [class]="showBancaria() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showBancaria()) {
          <div class="section-content">
            <form [formGroup]="bancariaForm">
              <div class="form-section">
                <h3><i class="pi pi-credit-card"></i> Datos Bancarios</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="nombreBanco">Nombre del Banco</label>
                    <input pInputText id="nombreBanco" formControlName="nombreBanco" placeholder="Ej: Banco Atl√°ntida" />
                  </div>
                  <div class="form-field">
                    <label for="tipoCuenta">Tipo de Cuenta</label>
                    <p-select id="tipoCuenta" formControlName="tipoCuenta" [options]="tiposCuenta" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="numeroCuenta">N√∫mero de Cuenta</label>
                    <input pInputText id="numeroCuenta" formControlName="numeroCuenta" placeholder="0000000000000000" />
                  </div>
                  <div class="form-field">
                    <label for="nombreTitular">Nombre del Titular</label>
                    <input pInputText id="nombreTitular" formControlName="nombreTitular" placeholder="Si es diferente al empleado" />
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 5. INFORMACI√ìN ACAD√âMICA -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showAcademica.set(!showAcademica())">
          <div class="tab-header">
            <i class="pi pi-book"></i>
            <span>5. Informaci√≥n Acad√©mica</span>
          </div>
          <i [class]="showAcademica() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showAcademica()) {
          <div class="section-content">
            <form [formGroup]="academicaForm">
              <div class="form-section">
                <h3><i class="pi pi-graduation-cap"></i> Formaci√≥n Acad√©mica</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="nivelEstudios">Nivel de Estudios</label>
                    <p-select id="nivelEstudios" formControlName="nivelEstudios" [options]="nivelesEstudio" placeholder="Seleccione"></p-select>
                  </div>
                  <div class="form-field">
                    <label for="titulosObtenidos">T√≠tulos Obtenidos</label>
                    <input pInputText id="titulosObtenidos" formControlName="titulosObtenidos" placeholder="Ej: Licenciatura en..." />
                  </div>
                  <div class="form-field full-width">
                    <label for="certificaciones">Certificaciones</label>
                    <textarea pTextarea id="certificaciones" formControlName="certificaciones" rows="3" placeholder="Liste las certificaciones profesionales"></textarea>
                  </div>
                  <div class="form-field full-width">
                    <label for="cursosCapacitaciones">Cursos y Capacitaciones</label>
                    <textarea pTextarea id="cursosCapacitaciones" formControlName="cursosCapacitaciones" rows="3" placeholder="Cursos, diplomados, capacitaciones"></textarea>
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 6. HABILIDADES Y EXPERIENCIA -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showHabilidades.set(!showHabilidades())">
          <div class="tab-header">
            <i class="pi pi-star"></i>
            <span>6. Habilidades y Experiencia</span>
          </div>
          <i [class]="showHabilidades() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showHabilidades()) {
          <div class="section-content">
            <form [formGroup]="habilidadesForm">
              <div class="form-section">
                <h3><i class="pi pi-cog"></i> Competencias Profesionales</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="a√±osExperiencia">A√±os de Experiencia</label>
                    <p-inputNumber id="a√±osExperiencia" formControlName="a√±osExperiencia" [min]="0" [max]="50"></p-inputNumber>
                  </div>
                  <div class="form-field">
                    <label for="idiomas">Idiomas</label>
                    <input pInputText id="idiomas" formControlName="idiomas" placeholder="Ej: Espa√±ol (nativo), Ingl√©s (intermedio)" />
                  </div>
                  <div class="form-field full-width">
                    <label for="habilidadesTecnicas">Habilidades T√©cnicas</label>
                    <textarea pTextarea id="habilidadesTecnicas" formControlName="habilidadesTecnicas" rows="3" placeholder="Software, herramientas, tecnolog√≠as"></textarea>
                  </div>
                  <div class="form-field full-width">
                    <label for="habilidadesBlandas">Habilidades Blandas</label>
                    <textarea pTextarea id="habilidadesBlandas" formControlName="habilidadesBlandas" rows="3" placeholder="Trabajo en equipo, liderazgo, comunicaci√≥n"></textarea>
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 7. INFORMACI√ìN DE EMERGENCIA -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showEmergencia.set(!showEmergencia())">
          <div class="tab-header">
            <i class="pi pi-exclamation-triangle"></i>
            <span>7. Informaci√≥n de Emergencia</span>
          </div>
          <i [class]="showEmergencia() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showEmergencia()) {
          <div class="section-content">
            <form [formGroup]="emergenciaForm">
              <div class="form-section">
                <h3><i class="pi pi-phone"></i> Contacto de Emergencia</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="nombreContacto">Nombre del Contacto</label>
                    <input pInputText id="nombreContacto" formControlName="nombreContacto" placeholder="Nombre completo" />
                  </div>
                  <div class="form-field">
                    <label for="relacionContacto">Relaci√≥n</label>
                    <input pInputText id="relacionContacto" formControlName="relacionContacto" placeholder="Ej: Esposo/a, Madre, Hermano" />
                  </div>
                  <div class="form-field">
                    <label for="telefonoContacto">Tel√©fono del Contacto</label>
                    <input pInputText id="telefonoContacto" formControlName="telefonoContacto" placeholder="9999-9999" />
                  </div>
                  <div class="form-field full-width">
                    <label for="direccionContacto">Direcci√≥n del Contacto</label>
                    <input pInputText id="direccionContacto" formControlName="direccionContacto" placeholder="Direcci√≥n completa" />
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 8. DATOS OPCIONALES -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showOpcionales.set(!showOpcionales())">
          <div class="tab-header">
            <i class="pi pi-info-circle"></i>
            <span>8. Datos Opcionales</span>
          </div>
          <i [class]="showOpcionales() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showOpcionales()) {
          <div class="section-content">
            <form [formGroup]="opcionalesForm">
              <div class="form-section">
                <h3><i class="pi pi-ellipsis-h"></i> Informaci√≥n Adicional</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="numeroUniforme">N√∫mero de Uniforme</label>
                    <input pInputText id="numeroUniforme" formControlName="numeroUniforme" placeholder="Ej: 15" />
                  </div>
                  <div class="form-field">
                    <label for="talla">Talla</label>
                    <input pInputText id="talla" formControlName="talla" placeholder="XS, S, M, L, XL, XXL" />
                  </div>
                  <div class="form-field">
                    <label for="tipoTransporte">Tipo de Transporte</label>
                    <input pInputText id="tipoTransporte" formControlName="tipoTransporte" placeholder="Veh√≠culo asignado, transporte p√∫blico" />
                  </div>
                  <div class="form-field full-width">
                    <label for="beneficiosAsignados">Beneficios Asignados</label>
                    <textarea pTextarea id="beneficiosAsignados" formControlName="beneficiosAsignados" rows="2" placeholder="Bonificaciones, vales, seguros"></textarea>
                  </div>
                  <div class="form-field full-width">
                    <label for="politicasFirmadas">Pol√≠ticas Firmadas</label>
                    <textarea pTextarea id="politicasFirmadas" formControlName="politicasFirmadas" rows="2" placeholder="C√≥digo de √©tica, reglamento interno"></textarea>
                  </div>
                  <div class="form-field full-width">
                    <label for="observaciones">Observaciones Internas</label>
                    <textarea pTextarea id="observaciones" formControlName="observaciones" rows="3" placeholder="Notas adicionales"></textarea>
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- 9. INFORMACI√ìN DEL SISTEMA -->
      <div class="collapsible-section">
        <div class="section-header-collapsible" (click)="showSistema.set(!showSistema())">
          <div class="tab-header">
            <i class="pi pi-desktop"></i>
            <span>9. Acceso al Sistema</span>
          </div>
          <i [class]="showSistema() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></i>
        </div>

        @if (showSistema()) {
          <div class="section-content">
            <form [formGroup]="sistemaForm">
              <div class="form-section">
                <h3><i class="pi pi-key"></i> Credenciales de Acceso</h3>
                <div class="form-grid">
                  <div class="form-field">
                    <label for="usuario">Usuario *</label>
                    <input pInputText id="usuario" formControlName="usuario" placeholder="nombre.apellido" />
                  </div>
                  <div class="form-field">
                    <label for="contrasena">Contrase√±a Temporal *</label>
                    <p-password id="contrasena" formControlName="contrasena" placeholder="M√≠nimo 6 caracteres" [toggleMask]="true"></p-password>
                  </div>
                  <div class="form-field">
                    <label for="rol">Rol en el Sistema *</label>
                    <p-select id="rol" formControlName="rol" [options]="roles" placeholder="Seleccione"></p-select>
                  </div>
                </div>
              </div>
            </form>
          </div>
        }
      </div>

      <!-- BOTONES DE ACCI√ìN -->
      <div class="form-actions">
        <button pButton type="button" label="Cancelar" icon="pi pi-times" class="p-button-secondary" (click)="onCancel()"></button>
        <button pButton type="submit" label="Guardar Empleado" icon="pi pi-check" (click)="onSubmit()"></button>
      </div>
    </p-card>
  </div>
</div>
